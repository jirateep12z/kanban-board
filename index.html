<!doctype html>
<html lang="en" id="html-root">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="A modern Kanban board application for task management with drag-and-drop, tags, attachments, and more"
    />
    <meta name="theme-color" content="#3b82f6" />
    <title>Kanban Board - Task Management</title>
    <link rel="icon" type="image/png" href="./image/kanban_board.png" />
    <link rel="manifest" href="./manifest.json" />
    <link rel="apple-touch-icon" href="./image/kanban_board.png" />
    <!-- Google Fonts - Noto Sans Thai -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/easymde/dist/easymde.min.css"
    />
    <link rel="stylesheet" href="css/styles.css" />
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: [
                'Noto Sans Thai',
                'ui-sans-serif',
                'system-ui',
                '-apple-system',
                'BlinkMacSystemFont',
                'Segoe UI',
                'Roboto',
                'Helvetica Neue',
                'Arial',
                'sans-serif'
              ]
            },
            colors: {
              brand: {
                50: '#eff6ff',
                400: '#60a5fa',
                500: '#3b82f6',
                600: '#2563eb'
              },
              'gray-dark': '#1f2937',
              warning: {
                50: '#fff7ed',
                500: '#f97316',
                700: '#c2410c'
              },
              success: {
                50: '#f0fdf4',
                500: '#22c55e',
                700: '#15803d'
              }
            }
          }
        }
      };
    </script>
  </head>
  <body class="min-h-screen bg-gray-50 p-4 md:p-8 dark:bg-gray-900">
    <div class="mx-auto max-w-[1400px]">
      <!-- Main Container -->
      <div
        class="rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"
      >
        <!-- Task Header -->
        <div
          class="border-b border-gray-200 bg-white px-4 py-4 dark:border-gray-800 dark:bg-gray-900/50"
        >
          <div class="flex items-center justify-between gap-4">
            <!-- Left Section: Board & Filters -->
            <div class="flex items-center gap-2 sm:gap-3">
              <!-- Board Selector -->
              <button
                onclick="OpenBoardSelector()"
                id="board-selector-button"
                class="from-brand-500 to-brand-600 inline-flex items-center gap-2 rounded-lg bg-gradient-to-r px-3 py-2 text-sm font-semibold text-white shadow-sm transition-all sm:px-4"
                title="Switch Board"
              >
                <svg
                  class="fill-current"
                  width="20"
                  height="20"
                  viewBox="0 0 448 512"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill="currentColor"
                    d="M192 80c0-26.5-21.5-48-48-48L48 32C21.5 32 0 53.5 0 80l0 96c0 26.5 21.5 48 48 48l96 0c26.5 0 48-21.5 48-48l0-96zm0 256c0-26.5-21.5-48-48-48l-96 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l96 0c26.5 0 48-21.5 48-48l0-96zM256 80l0 96c0 26.5 21.5 48 48 48l96 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-96 0c-26.5 0-48 21.5-48 48zM448 336c0-26.5-21.5-48-48-48l-96 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l96 0c26.5 0 48-21.5 48-48l0-96z"
                  />
                </svg>
                <span id="current-board-name" class="hidden sm:inline"
                  >My Board</span
                >
              </button>
              <!-- More Menu -->
              <div class="relative">
                <button
                  onclick="ToggleMoreMenu()"
                  id="more-menu-button"
                  class="inline-flex h-9 w-9 items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-600 transition-colors hover:bg-gray-50 sm:w-auto sm:gap-2 sm:px-3 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"
                  title="More Options"
                >
                  <svg
                    class="fill-current"
                    width="20"
                    height="20"
                    viewBox="0 0 640 640"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M96 320C96 289.1 121.1 264 152 264C182.9 264 208 289.1 208 320C208 350.9 182.9 376 152 376C121.1 376 96 350.9 96 320zM264 320C264 289.1 289.1 264 320 264C350.9 264 376 289.1 376 320C376 350.9 350.9 376 320 376C289.1 376 264 350.9 264 320zM488 264C518.9 264 544 289.1 544 320C544 350.9 518.9 376 488 376C457.1 376 432 350.9 432 320C432 289.1 457.1 264 488 264z"
                    />
                  </svg>
                  <span
                    class="hidden text-sm font-medium sm:inline"
                    data-i18n="header.more_menu"
                    >More</span
                  >
                </button>
                <div
                  id="more-menu-dropdown"
                  class="absolute left-0 top-full z-50 mt-2 hidden w-52 overflow-hidden rounded-xl border border-gray-200 bg-white shadow-xl dark:border-gray-700 dark:bg-gray-800"
                >
                  <div class="py-1">
                    <button
                      onclick="OpenTemplatesManager(); ToggleMoreMenu();"
                      class="hover:bg-brand-50 hover:text-brand-600 dark:hover:bg-brand-900/20 dark:hover:text-brand-400 flex w-full items-center gap-3 px-4 py-2.5 text-sm text-gray-700 transition-colors dark:text-gray-300"
                    >
                      <svg
                        class="fill-current"
                        width="20"
                        height="20"
                        viewBox="0 0 640 640"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fill="currentColor"
                          d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM384 96l0 64-320 0 0-64 320 0zM64 224l64 0 0 192-64 0 0-192zm320 0l0 192-192 0 0-192 192 0z"
                        />
                      </svg>
                      <span class="font-medium" data-i18n="templates.title"
                        >Templates</span
                      >
                    </button>
                    <button
                      onclick="OpenRecurringTasksManager(); ToggleMoreMenu();"
                      class="hover:bg-brand-50 hover:text-brand-600 dark:hover:bg-brand-900/20 dark:hover:text-brand-400 flex w-full items-center gap-3 px-4 py-2.5 text-sm text-gray-700 transition-colors dark:text-gray-300"
                    >
                      <svg
                        class="fill-current"
                        width="20"
                        height="20"
                        viewBox="0 0 640 640"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M96 160C96 124.7 124.7 96 160 96L480 96C515.3 96 544 124.7 544 160L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 160zM160 160L160 224L224 224L224 160L160 160zM480 160L288 160L288 224L480 224L480 160zM160 288L160 352L224 352L224 288L160 288zM480 288L288 288L288 352L480 352L480 288zM160 416L160 480L224 480L224 416L160 416zM480 416L288 416L288 480L480 480L480 416z"
                        />
                      </svg>
                      <span class="font-medium" data-i18n="recurring.title"
                        >Recurring Tasks</span
                      >
                    </button>
                    <button
                      onclick="OpenAnalyticsDashboard(); ToggleMoreMenu();"
                      class="hover:bg-brand-50 hover:text-brand-600 dark:hover:bg-brand-900/20 dark:hover:text-brand-400 flex w-full items-center gap-3 px-4 py-2.5 text-sm text-gray-700 transition-colors dark:text-gray-300"
                    >
                      <svg
                        class="fill-current"
                        width="20"
                        height="20"
                        viewBox="0 0 640 640"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M256 144C256 117.5 277.5 96 304 96L336 96C362.5 96 384 117.5 384 144L384 496C384 522.5 362.5 544 336 544L304 544C277.5 544 256 522.5 256 496L256 144zM64 336C64 309.5 85.5 288 112 288L144 288C170.5 288 192 309.5 192 336L192 496C192 522.5 170.5 544 144 544L112 544C85.5 544 64 522.5 64 496L64 336zM496 160L528 160C554.5 160 576 181.5 576 208L576 496C576 522.5 554.5 544 528 544L496 544C469.5 544 448 522.5 448 496L448 208C448 181.5 469.5 160 496 160z"
                        />
                      </svg>
                      <span class="font-medium" data-i18n="analytics.title"
                        >Analytics</span
                      >
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <!-- Right Section: Actions -->
            <div class="flex items-center gap-2">
              <button
                onclick="ToggleTheme()"
                id="theme-toggle"
                class="inline-flex h-9 w-9 items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-600 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
                title="Toggle Dark Mode"
              >
                <span id="theme-icon"></span>
              </button>
              <div class="relative">
                <button
                  onclick="ToggleLanguageMenu()"
                  id="language-toggle"
                  class="inline-flex h-9 w-9 items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-600 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
                  title="Change Language"
                >
                  <svg
                    class="fill-current"
                    width="18"
                    height="18"
                    viewBox="0 0 640 640"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M192 64C209.7 64 224 78.3 224 96L224 128L352 128C369.7 128 384 142.3 384 160C384 177.7 369.7 192 352 192L342.4 192L334 215.1C317.6 260.3 292.9 301.6 261.8 337.1C276 345.9 290.8 353.7 306.2 360.6L356.6 383L418.8 243C423.9 231.4 435.4 224 448 224C460.6 224 472.1 231.4 477.2 243L605.2 531C612.4 547.2 605.1 566.1 589 573.2C572.9 580.3 553.9 573.1 546.8 557L526.8 512L369.3 512L349.3 557C342.1 573.2 323.2 580.4 307.1 573.2C291 566 283.7 547.1 290.9 531L330.7 441.5L280.3 419.1C257.3 408.9 235.3 396.7 214.5 382.7C193.2 399.9 169.9 414.9 145 427.4L110.3 444.6C94.5 452.5 75.3 446.1 67.4 430.3C59.5 414.5 65.9 395.3 81.7 387.4L116.2 370.1C132.5 361.9 148 352.4 162.6 341.8C148.8 329.1 135.8 315.4 123.7 300.9L113.6 288.7C102.3 275.1 104.1 254.9 117.7 243.6C131.3 232.3 151.5 234.1 162.8 247.7L173 259.9C184.5 273.8 197.1 286.7 210.4 298.6C237.9 268.2 259.6 232.5 273.9 193.2L274.4 192L64.1 192C46.3 192 32 177.7 32 160C32 142.3 46.3 128 64 128L160 128L160 96C160 78.3 174.3 64 192 64zM448 334.8L397.7 448L498.3 448L448 334.8z"
                    />
                  </svg>
                </button>
                <div
                  id="language-menu-dropdown"
                  class="absolute right-0 top-full z-50 mt-2 hidden w-40 overflow-hidden rounded-xl border border-gray-200 bg-white shadow-xl dark:border-gray-700 dark:bg-gray-800"
                >
                  <div class="py-1">
                    <button
                      onclick="ChangeLanguage('en'); ToggleLanguageMenu();"
                      class="hover:bg-brand-50 hover:text-brand-600 dark:hover:bg-brand-900/20 dark:hover:text-brand-400 flex w-full items-center justify-between px-4 py-2.5 text-sm text-gray-700 transition-colors dark:text-gray-300"
                    >
                      <span class="font-medium">English</span>
                      <span id="lang-en-check" class="text-brand-500 hidden"
                        >✓</span
                      >
                    </button>
                    <button
                      onclick="ChangeLanguage('th'); ToggleLanguageMenu();"
                      class="hover:bg-brand-50 hover:text-brand-600 dark:hover:bg-brand-900/20 dark:hover:text-brand-400 flex w-full items-center justify-between px-4 py-2.5 text-sm text-gray-700 transition-colors dark:text-gray-300"
                    >
                      <span class="font-medium">ไทย</span>
                      <span id="lang-th-check" class="text-brand-500 hidden"
                        >✓</span
                      >
                    </button>
                  </div>
                </div>
              </div>
              <button
                id="share-board-button"
                onclick="OpenShareModal()"
                class="inline-flex h-9 w-9 items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-600 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
                title="Share Board"
              >
                <svg
                  class="fill-current"
                  width="18"
                  height="18"
                  viewBox="0 0 640 640"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M448 256C501 256 544 213 544 160C544 107 501 64 448 64C395 64 352 107 352 160C352 165.4 352.5 170.8 353.3 176L223.6 248.1C206.7 233.1 184.4 224 160 224C107 224 64 267 64 320C64 373 107 416 160 416C184.4 416 206.6 406.9 223.6 391.9L353.3 464C352.4 469.2 352 474.5 352 480C352 533 395 576 448 576C501 576 544 533 544 480C544 427 501 384 448 384C423.6 384 401.4 393.1 384.4 408.1L254.7 336C255.6 330.8 256 325.5 256 320C256 314.5 255.5 309.2 254.7 304L384.4 231.9C401.3 246.9 423.6 256 448 256z"
                  />
                </svg>
              </button>
              <button
                id="add-task-button"
                onclick="OpenTaskModal()"
                class="bg-brand-500 hover:bg-brand-600 inline-flex h-9 w-9 items-center justify-center rounded-lg text-white shadow-sm transition-colors sm:w-auto sm:gap-2 sm:px-4"
                title="Add New Task"
              >
                <svg
                  class="fill-current"
                  width="20"
                  height="20"
                  viewBox="0 0 640 640"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M352 128C352 110.3 337.7 96 320 96C302.3 96 288 110.3 288 128L288 288L128 288C110.3 288 96 302.3 96 320C96 337.7 110.3 352 128 352L288 352L288 512C288 529.7 302.3 544 320 544C337.7 544 352 529.7 352 512L352 352L512 352C529.7 352 544 337.7 544 320C544 302.3 529.7 288 512 288L352 288L352 128z"
                  />
                </svg>
                <span
                  class="hidden text-sm font-semibold sm:inline"
                  data-i18n="header.add_task"
                  >New Task</span
                >
              </button>
            </div>
          </div>
        </div>
        <!-- Filters Section -->
        <div class="px-4 py-4 xl:px-6">
          <div
            class="flex w-full flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"
          >
            <!-- Filter Tabs -->
            <div
              class="flex flex-wrap items-center gap-x-1 gap-y-2 rounded-lg bg-gray-100 p-0.5 dark:bg-gray-900"
            >
              <button
                onclick="FilterTasks('All')"
                id="filter-all"
                class="group inline-flex items-center gap-2 rounded-md bg-white px-4 py-2 text-sm font-medium text-gray-900 hover:text-gray-900 dark:bg-gray-800 dark:text-white dark:hover:text-white"
              >
                <span data-i18n="status.all">All Tasks</span>
                <span
                  class="group-hover:bg-brand-50 group-hover:text-brand-500 dark:group-hover:bg-brand-500/15 dark:group-hover:text-brand-400 text-brand-500 dark:text-brand-400 bg-brand-50 dark:bg-brand-500/15 inline-flex rounded-full px-2 py-0.5 text-xs font-medium leading-normal"
                  id="count-all"
                  >0</span
                >
              </button>
              <button
                onclick="FilterTasks('Todo')"
                id="filter-todo"
                class="group inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"
              >
                <span data-i18n="status.todo">To do</span>
                <span
                  class="group-hover:bg-brand-50 group-hover:text-brand-500 dark:group-hover:bg-brand-500/15 dark:group-hover:text-brand-400 inline-flex rounded-full bg-white px-2 py-0.5 text-xs font-medium leading-normal dark:bg-white/[0.03]"
                  id="count-todo"
                  >0</span
                >
              </button>
              <button
                onclick="FilterTasks('InProgress')"
                id="filter-inprogress"
                class="group inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"
              >
                <span data-i18n="status.in_progress">In Progress</span>
                <span
                  class="group-hover:bg-brand-50 group-hover:text-brand-500 dark:group-hover:bg-brand-500/15 dark:group-hover:text-brand-400 inline-flex rounded-full bg-white px-2 py-0.5 text-xs font-medium leading-normal dark:bg-white/[0.03]"
                  id="count-inprogress"
                  >0</span
                >
              </button>
              <button
                onclick="FilterTasks('Completed')"
                id="filter-completed"
                class="group inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"
              >
                <span data-i18n="status.completed">Completed</span>
                <span
                  class="group-hover:bg-brand-50 group-hover:text-brand-500 dark:group-hover:bg-brand-500/15 dark:group-hover:text-brand-400 inline-flex rounded-full bg-white px-2 py-0.5 text-xs font-medium leading-normal dark:bg-white/[0.03]"
                  id="count-completed"
                  >0</span
                >
              </button>
            </div>
            <!-- Action Buttons -->
            <div class="flex flex-wrap items-center gap-3 xl:justify-end">
              <!-- Search Box -->
              <div class="relative w-full md:w-auto">
                <input
                  type="text"
                  id="search-input"
                  placeholder="Search tasks..."
                  data-i18n-placeholder="header.search_placeholder"
                  oninput="SearchTasks()"
                  class="focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-white py-2.5 pl-10 pr-4 text-sm text-gray-800 shadow-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"
                />
                <svg
                  class="absolute left-3 top-1/2 -translate-y-1/2 fill-current text-gray-400"
                  width="20"
                  height="20"
                  viewBox="0 0 640 640"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M480 272C480 317.9 465.1 360.3 440 394.7L566.6 521.4C579.1 533.9 579.1 554.2 566.6 566.7C554.1 579.2 533.8 579.2 521.3 566.7L394.7 440C360.3 465.1 317.9 480 272 480C157.1 480 64 386.9 64 272C64 157.1 157.1 64 272 64C386.9 64 480 157.1 480 272zM272 416C351.5 416 416 351.5 416 272C416 192.5 351.5 128 272 128C192.5 128 128 192.5 128 272C128 351.5 192.5 416 272 416z"
                  />
                </svg>
              </div>
              <!-- Date Filter with Arrows -->
              <div class="relative" id="date-filter-dropdown-container">
                <div
                  class="shadow-theme-xs inline-flex items-center rounded-lg border border-gray-300 dark:border-gray-700"
                >
                  <!-- Previous Button -->
                  <button
                    onclick="NavigateDatePrevious()"
                    class="inline-flex items-center justify-center rounded-l-lg px-3 py-2.5 text-gray-700 transition-colors hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-white/[0.03]"
                    title="Previous"
                  >
                    <svg
                      class="fill-current"
                      width="20"
                      height="20"
                      viewBox="0 0 640 640"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M199.7 299.8C189.4 312.4 190.2 330.9 201.9 342.6L329.9 470.6C339.1 479.8 352.8 482.5 364.8 477.5C376.8 472.5 384.6 460.9 384.6 447.9L384.6 191.9C384.6 179 376.8 167.3 364.8 162.3C352.8 157.3 339.1 160.1 329.9 169.2L201.9 297.2L199.7 299.6z"
                      />
                    </svg>
                  </button>
                  <!-- Center Button with Date Label -->
                  <button
                    onclick="ToggleDateFilterDropdown()"
                    class="inline-flex min-w-[140px] items-center justify-center gap-2 border-x border-gray-300 px-4 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-white/[0.03]"
                  >
                    <svg
                      class="fill-current"
                      width="20"
                      height="20"
                      viewBox="0 0 640 640"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M224 64C206.3 64 192 78.3 192 96L192 128L160 128C124.7 128 96 156.7 96 192L96 240L544 240L544 192C544 156.7 515.3 128 480 128L448 128L448 96C448 78.3 433.7 64 416 64C398.3 64 384 78.3 384 96L384 128L256 128L256 96C256 78.3 241.7 64 224 64zM96 288L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 288L96 288z"
                      />
                    </svg>
                  </button>
                  <!-- Next Button -->
                  <button
                    onclick="NavigateDateNext()"
                    class="inline-flex items-center justify-center rounded-r-lg px-3 py-2.5 text-gray-700 transition-colors hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-white/[0.03]"
                    title="Next"
                  >
                    <svg
                      class="fill-current"
                      width="20"
                      height="20"
                      viewBox="0 0 640 640"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M441.3 299.8C451.5 312.4 450.8 330.9 439.1 342.6L311.1 470.6C301.9 479.8 288.2 482.5 276.2 477.5C264.2 472.5 256.5 460.9 256.5 448L256.5 192C256.5 179.1 264.3 167.4 276.3 162.4C288.3 157.4 302 160.2 311.2 169.3L439.2 297.3L441.4 299.7z"
                      />
                    </svg>
                  </button>
                </div>
                <!-- Date Filter Dropdown Menu -->
                <div
                  id="date-filter-dropdown"
                  class="dark:bg-gray-dark absolute right-0 top-full z-40 mt-2 hidden w-72 rounded-2xl border border-gray-200 bg-white p-4 shadow-xl dark:border-gray-800"
                >
                  <div class="space-y-4">
                    <div>
                      <label
                        class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"
                        data-i18n="filters.date_filter"
                        >Time Period</label
                      >
                      <div class="space-y-2">
                        <button
                          type="button"
                          onclick="ApplyDateFilter('today')"
                          class="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-left text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-white/[0.03]"
                        >
                          <span data-i18n="filters.today">📅 Today</span>
                        </button>
                        <button
                          type="button"
                          onclick="ApplyDateFilter('yesterday')"
                          class="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-left text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-white/[0.03]"
                        >
                          <span data-i18n="filters.yesterday"
                            >📅 Yesterday</span
                          >
                        </button>
                        <button
                          type="button"
                          onclick="ApplyDateFilter('this-week')"
                          class="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-left text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-white/[0.03]"
                        >
                          <span data-i18n="filters.this_week"
                            >📅 This Week</span
                          >
                        </button>
                        <button
                          type="button"
                          onclick="ApplyDateFilter('this-month')"
                          class="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-left text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-white/[0.03]"
                        >
                          <span data-i18n="filters.this_month"
                            >📅 This Month</span
                          >
                        </button>
                        <button
                          type="button"
                          onclick="ApplyDateFilter('this-year')"
                          class="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-left text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-white/[0.03]"
                        >
                          <span data-i18n="filters.this_year"
                            >📅 This Year</span
                          >
                        </button>
                      </div>
                    </div>
                    <div
                      class="border-t border-gray-200 pt-4 dark:border-gray-700"
                    >
                      <label
                        class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"
                        data-i18n="filters.custom_date"
                        >Custom Date</label
                      >
                      <input
                        type="date"
                        id="custom-date-picker"
                        onchange="ApplyCustomDateFilter()"
                        class="focus:border-brand-300 focus:ring-brand-500/10 w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-800 shadow-sm focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"
                      />
                    </div>
                    <div
                      class="border-t border-gray-200 pt-4 dark:border-gray-700"
                    >
                      <button
                        type="button"
                        onclick="ApplyDateFilter('all')"
                        class="bg-brand-500 hover:bg-brand-600 w-full rounded-lg px-4 py-2.5 text-sm font-medium text-white"
                      >
                        <span data-i18n="filters.all_dates">Show All</span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Filter & Sort Button -->
              <div class="relative" id="filter-dropdown-container">
                <button
                  onclick="ToggleFilterDropdown()"
                  class="shadow-theme-xs inline-flex items-center gap-2 rounded-lg border border-gray-300 px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-white/[0.03]"
                  title="Filter & Sort"
                >
                  <svg
                    class="fill-current"
                    width="20"
                    height="20"
                    viewBox="0 0 640 640"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M96 128C83.1 128 71.4 135.8 66.4 147.8C61.4 159.8 64.2 173.5 73.4 182.6L256 365.3L256 480C256 488.5 259.4 496.6 265.4 502.6L329.4 566.6C338.6 575.8 352.3 578.5 364.3 573.5C376.3 568.5 384 556.9 384 544L384 365.3L566.6 182.7C575.8 173.5 578.5 159.8 573.5 147.8C568.5 135.8 556.9 128 544 128L96 128z"
                    />
                  </svg>
                </button>
                <!-- Dropdown Menu -->
                <div
                  id="filter-dropdown"
                  class="dark:bg-gray-dark absolute right-0 top-full z-40 mt-2 hidden w-64 rounded-2xl border border-gray-200 bg-white p-4 shadow-xl dark:border-gray-800"
                >
                  <div class="space-y-4">
                    <!-- Sort By -->
                    <div>
                      <label
                        class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"
                        data-i18n="filters.sort_by"
                        >Sort By</label
                      >
                      <select
                        id="sort-by"
                        onchange="ApplySortAndFilter()"
                        class="focus:border-brand-500 focus:ring-brand-500/20 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-800 focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-800 dark:text-white"
                      >
                        <option
                          value="created-desc"
                          data-i18n="sort.created_desc"
                        >
                          Newest First
                        </option>
                        <option
                          value="created-asc"
                          data-i18n="sort.created_asc"
                        >
                          Oldest First
                        </option>
                        <option value="title-asc" data-i18n="sort.title_asc">
                          Title (A-Z)
                        </option>
                        <option value="title-desc" data-i18n="sort.title_desc">
                          Title (Z-A)
                        </option>
                        <option value="date-asc" data-i18n="sort.date_asc">
                          Due Date (Earliest)
                        </option>
                        <option value="date-desc" data-i18n="sort.date_desc">
                          Due Date (Latest)
                        </option>
                      </select>
                    </div>
                    <!-- Filter by Tag -->
                    <div>
                      <label
                        class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"
                        data-i18n="filters.tag_filter"
                        >Filter by Tag</label
                      >
                      <select
                        id="filter-tag"
                        onchange="ApplySortAndFilter()"
                        class="focus:border-brand-500 focus:ring-brand-500/20 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-800 focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-800 dark:text-white"
                      >
                        <option value="" data-i18n="filters.all_tags">
                          All Tags
                        </option>
                      </select>
                    </div>
                    <!-- Reset Button -->
                    <button
                      onclick="ResetFilters()"
                      class="w-full rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-white/[0.03]"
                    >
                      <span data-i18n="filters.reset_filters"
                        >Reset Filters</span
                      >
                    </button>
                  </div>
                </div>
              </div>
              <button
                onclick="ToggleEditMode()"
                id="edit-mode-toggle"
                class="inline-flex items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-600 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
                title="Toggle Edit/Read Mode"
              >
                <svg
                  id="edit-mode-icon"
                  class="fill-current"
                  width="20"
                  height="20"
                  viewBox="0 0 640 640"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M416.9 85.2L372 130.1L509.9 268L554.8 223.1C568.4 209.6 576 191.2 576 172C576 152.8 568.4 134.4 554.8 120.9L519.1 85.2C505.6 71.6 487.2 64 468 64C448.8 64 430.4 71.6 416.9 85.2zM338.1 164L122.9 379.1C112.2 389.8 104.4 403.2 100.3 417.8L64.9 545.6C62.6 553.9 64.9 562.9 71.1 569C77.3 575.1 86.2 577.5 94.5 575.2L222.3 539.7C236.9 535.6 250.2 527.9 261 517.1L476 301.9L338.1 164z"
                  />
                </svg>
              </button>
              <button
                onclick="OpenImportExportModal()"
                id="import-export-button"
                class="inline-flex items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-600 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
                title="Import/Export Data"
              >
                <svg
                  class="fill-current"
                  width="20"
                  height="20"
                  viewBox="0 0 640 640"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M352 96C352 78.3 337.7 64 320 64C302.3 64 288 78.3 288 96L288 306.7L246.6 265.3C234.1 252.8 213.8 252.8 201.3 265.3C188.8 277.8 188.8 298.1 201.3 310.6L297.3 406.6C309.8 419.1 330.1 419.1 342.6 406.6L438.6 310.6C451.1 298.1 451.1 277.8 438.6 265.3C426.1 252.8 405.8 252.8 393.3 265.3L352 306.7L352 96zM160 384C124.7 384 96 412.7 96 448L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 448C544 412.7 515.3 384 480 384L433.1 384L376.5 440.6C345.3 471.8 294.6 471.8 263.4 440.6L206.9 384L160 384zM464 440C477.3 440 488 450.7 488 464C488 477.3 477.3 488 464 488C450.7 488 440 477.3 440 464C440 450.7 450.7 440 464 440z"
                  />
                </svg>
              </button>
              <button
                onclick="ShowKeyboardShortcutsModal()"
                id="shortcuts-button"
                class="inline-flex items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-600 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
                title="Keyboard Shortcuts (?)"
              >
                <svg
                  class="fill-current"
                  width="20"
                  height="20"
                  viewBox="0 0 640 640"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M96 128C60.7 128 32 156.7 32 192L32 448C32 483.3 60.7 512 96 512L544 512C579.3 512 608 483.3 608 448L608 192C608 156.7 579.3 128 544 128L96 128zM112 192L144 192C152.8 192 160 199.2 160 208L160 240C160 248.8 152.8 256 144 256L112 256C103.2 256 96 248.8 96 240L96 208C96 199.2 103.2 192 112 192zM96 304C96 295.2 103.2 288 112 288L144 288C152.8 288 160 295.2 160 304L160 336C160 344.8 152.8 352 144 352L112 352C103.2 352 96 344.8 96 336L96 304zM208 192L240 192C248.8 192 256 199.2 256 208L256 240C256 248.8 248.8 256 240 256L208 256C199.2 256 192 248.8 192 240L192 208C192 199.2 199.2 192 208 192zM192 304C192 295.2 199.2 288 208 288L240 288C248.8 288 256 295.2 256 304L256 336C256 344.8 248.8 352 240 352L208 352C199.2 352 192 344.8 192 336L192 304zM208 384L432 384C440.8 384 448 391.2 448 400L448 432C448 440.8 440.8 448 432 448L208 448C199.2 448 192 440.8 192 432L192 400C192 391.2 199.2 384 208 384zM288 208C288 199.2 295.2 192 304 192L336 192C344.8 192 352 199.2 352 208L352 240C352 248.8 344.8 256 336 256L304 256C295.2 256 288 248.8 288 240L288 208zM304 288L336 288C344.8 288 352 295.2 352 304L352 336C352 344.8 344.8 352 336 352L304 352C295.2 352 288 344.8 288 336L288 304C288 295.2 295.2 288 304 288zM384 208C384 199.2 391.2 192 400 192L432 192C440.8 192 448 199.2 448 208L448 240C448 248.8 440.8 256 432 256L400 256C391.2 256 384 248.8 384 240L384 208zM400 288L432 288C440.8 288 448 295.2 448 304L448 336C448 344.8 440.8 352 432 352L400 352C391.2 352 384 344.8 384 336L384 304C384 295.2 391.2 288 400 288zM480 208C480 199.2 487.2 192 496 192L528 192C536.8 192 544 199.2 544 208L544 240C544 248.8 536.8 256 528 256L496 256C487.2 256 480 248.8 480 240L480 208zM496 288L528 288C536.8 288 544 295.2 544 304L544 336C544 344.8 536.8 352 528 352L496 352C487.2 352 480 344.8 480 336L480 304C480 295.2 487.2 288 496 288z"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
        <!-- Task Wrapper -->
        <div
          class="grid grid-cols-1 border-t border-gray-200 sm:mt-0 sm:grid-cols-2 xl:grid-cols-3 dark:border-gray-800"
          id="kanban-board"
        >
          <!-- To Do Column -->
          <div
            class="swim-lane flex flex-col gap-5 p-4 xl:p-6"
            data-status="Todo"
            ondrop="HandleDrop(event)"
            ondragover="HandleDragOver(event)"
            ondragleave="HandleDragLeave(event)"
          >
            <div class="mb-1 flex items-center justify-between">
              <h3
                class="flex items-center gap-3 text-base font-medium text-gray-800 dark:text-white/90"
              >
                <span data-i18n="status.todo">To Do</span>
                <span
                  class="inline-flex rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700 dark:bg-white/[0.03] dark:text-white/80"
                  id="lane-count-todo"
                  >0</span
                >
              </h3>
            </div>
            <div id="lane-todo" class="flex flex-col gap-5"></div>
          </div>
          <!-- In Progress Column -->
          <div
            class="swim-lane flex flex-col gap-5 border-x border-gray-200 p-4 xl:p-6 dark:border-gray-800"
            data-status="InProgress"
            ondrop="HandleDrop(event)"
            ondragover="HandleDragOver(event)"
            ondragleave="HandleDragLeave(event)"
          >
            <div class="mb-1 flex items-center justify-between">
              <h3
                class="flex items-center gap-3 text-base font-medium text-gray-800 dark:text-white/90"
              >
                <span data-i18n="status.in_progress">In Progress</span>
                <span
                  class="bg-warning-50 text-warning-700 dark:bg-warning-500/15 inline-flex rounded-full px-2 py-0.5 text-xs font-medium dark:text-orange-400"
                  id="lane-count-inprogress"
                  >0</span
                >
              </h3>
            </div>
            <div id="lane-inprogress" class="flex flex-col gap-5"></div>
          </div>
          <!-- Completed Column -->
          <div
            class="swim-lane flex flex-col gap-5 p-4 xl:p-6"
            data-status="Completed"
            ondrop="HandleDrop(event)"
            ondragover="HandleDragOver(event)"
            ondragleave="HandleDragLeave(event)"
          >
            <div class="mb-1 flex items-center justify-between">
              <h3
                class="flex items-center gap-3 text-base font-medium text-gray-800 dark:text-white/90"
              >
                <span data-i18n="status.completed">Completed</span>
                <span
                  class="bg-success-50 text-success-700 dark:bg-success-500/15 dark:text-success-500 inline-flex rounded-full px-2 py-0.5 text-xs font-medium"
                  id="lane-count-completed"
                  >0</span
                >
              </h3>
            </div>
            <div id="lane-completed" class="flex flex-col gap-5"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- Task Modal -->
    <div
      id="task-modal"
      class="fixed inset-0 z-50 hidden items-center justify-center p-4"
    >
      <div
        class="modal-backdrop absolute inset-0 bg-black/50"
        onclick="CloseTaskModal()"
      ></div>
      <div
        class="modal-content relative w-full max-w-[700px] overflow-y-auto rounded-3xl bg-white p-6 shadow-xl lg:p-11 dark:bg-gray-900"
        style="max-height: 90vh"
      >
        <div class="px-2">
          <h4
            class="mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90"
            id="modal-title"
          >
            Add a new task
          </h4>
          <p
            class="mb-6 text-sm text-gray-500 lg:mb-7 dark:text-gray-400"
            id="modal-description"
          >
            Effortlessly manage your to-do list: add a new task
          </p>
        </div>
        <!-- Close Button -->
        <button
          onclick="CloseTaskModal()"
          class="absolute right-5 top-5 z-50 flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-gray-400 transition-colors hover:bg-gray-200 hover:text-gray-600 sm:h-11 sm:w-11 dark:bg-white/[0.05] dark:text-gray-400 dark:hover:bg-white/[0.07] dark:hover:text-gray-300"
        >
          <svg
            class="h-5 w-5 fill-current sm:h-6 sm:w-6"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6.04289 16.5418C5.65237 16.9323 5.65237 17.5655 6.04289 17.956C6.43342 18.3465 7.06658 18.3465 7.45711 17.956L11.9987 13.4144L16.5408 17.9565C16.9313 18.347 17.5645 18.347 17.955 17.9565C18.3455 17.566 18.3455 16.9328 17.955 16.5423L13.4129 12.0002L17.955 7.45808C18.3455 7.06756 18.3455 6.43439 17.955 6.04387C17.5645 5.65335 16.9313 5.65335 16.5408 6.04387L11.9987 10.586L7.45711 6.04439C7.06658 5.65386 6.43342 5.65386 6.04289 6.04439C5.65237 6.43491 5.65237 7.06808 6.04289 7.4586L10.5845 12.0002L6.04289 16.5418Z"
              fill=""
            ></path>
          </svg>
        </button>
        <form id="task-form" class="flex flex-col">
          <input type="hidden" id="task-id" />
          <div
            class="max-h-[450px] overflow-y-auto px-2"
            style="scrollbar-width: thin"
          >
            <div class="grid grid-cols-1 gap-x-6 gap-y-5 sm:grid-cols-2">
              <!-- Task Title -->
              <div class="sm:col-span-2">
                <label
                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                  data-i18n="task_modal.task_title"
                >
                  Task Title
                </label>
                <input
                  type="text"
                  id="task-title"
                  required
                  placeholder="Enter task title"
                  data-i18n-placeholder="task_modal.task_title_placeholder"
                  class="focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm text-gray-800 shadow-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"
                />
              </div>
              <!-- Due Date -->
              <div>
                <label
                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                  data-i18n="task_modal.task_date"
                >
                  Due Date
                </label>
                <div class="relative">
                  <input
                    type="date"
                    id="task-date"
                    class="focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-800 shadow-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"
                  />
                </div>
              </div>
              <!-- Status -->
              <div>
                <label
                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                  data-i18n="task_modal.task_status"
                >
                  Status
                </label>
                <div class="relative">
                  <select
                    id="task-status"
                    class="focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-white px-4 py-2.5 pr-11 text-sm text-gray-800 shadow-sm focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"
                  >
                    <option value="Todo" data-i18n="status.todo">To Do</option>
                    <option value="InProgress" data-i18n="status.in_progress">
                      In Progress
                    </option>
                    <option value="Completed" data-i18n="status.completed">
                      Completed
                    </option>
                  </select>
                </div>
              </div>
              <!-- Priority -->
              <div class="sm:col-span-2">
                <label
                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                  data-i18n="task_modal.task_priority"
                >
                  Priority
                </label>
                <div class="flex gap-2">
                  <label
                    class="flex flex-1 cursor-pointer items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 has-[:checked]:border-red-500 has-[:checked]:bg-red-50 has-[:checked]:text-red-700 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:has-[:checked]:border-red-700 dark:has-[:checked]:bg-red-500/15 dark:has-[:checked]:text-red-400"
                  >
                    <input
                      type="radio"
                      name="task-priority"
                      value="high"
                      class="sr-only"
                    />
                    <svg
                      class="h-4 w-4 fill-current"
                      viewBox="0 0 640 640"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320z"
                      />
                    </svg>
                    <span data-i18n="priority.high">High</span>
                  </label>
                  <label
                    class="flex flex-1 cursor-pointer items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 has-[:checked]:border-yellow-500 has-[:checked]:bg-yellow-50 has-[:checked]:text-yellow-700 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:has-[:checked]:border-yellow-700 dark:has-[:checked]:bg-yellow-500/15 dark:has-[:checked]:text-yellow-400"
                  >
                    <input
                      type="radio"
                      name="task-priority"
                      value="medium"
                      class="sr-only"
                      checked
                    />
                    <svg
                      class="h-4 w-4 fill-current"
                      viewBox="0 0 640 640"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320z"
                      />
                    </svg>
                    <span data-i18n="priority.medium">Medium</span>
                  </label>
                  <label
                    class="flex flex-1 cursor-pointer items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 has-[:checked]:border-green-500 has-[:checked]:bg-green-50 has-[:checked]:text-green-700 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:has-[:checked]:border-green-700 dark:has-[:checked]:bg-green-500/15 dark:has-[:checked]:text-green-400"
                  >
                    <input
                      type="radio"
                      name="task-priority"
                      value="low"
                      class="sr-only"
                    />
                    <svg
                      class="h-4 w-4 fill-current"
                      viewBox="0 0 640 640"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320z"
                      />
                    </svg>
                    <span data-i18n="priority.low">Low</span>
                  </label>
                </div>
              </div>
              <!-- Tags -->
              <div class="sm:col-span-2">
                <label
                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                  data-i18n="task_modal.task_tags"
                >
                  Tags
                </label>
                <!-- Tags Display Area -->
                <div
                  id="tags-container"
                  class="mb-2 flex flex-wrap gap-2"
                ></div>
                <!-- Tag Input -->
                <div class="grid grid-cols-4 gap-2">
                  <input
                    type="text"
                    id="task-tag-input"
                    placeholder="Type tag name and press Enter"
                    data-i18n-placeholder="task_modal.tag_name"
                    class="focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 col-span-2 h-11 flex-1 appearance-none rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm text-gray-800 shadow-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"
                  />
                  <select
                    id="task-tag-color"
                    class="focus:border-brand-300 focus:ring-brand-500/10 col-span-1 h-11 appearance-none rounded-lg border border-gray-300 bg-white px-3 py-2.5 text-sm text-gray-800 shadow-sm focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"
                    title="Tag Color"
                  >
                    <option value="blue">Blue</option>
                    <option value="green">Green</option>
                    <option value="red">Red</option>
                    <option value="yellow">Yellow</option>
                    <option value="purple">Purple</option>
                    <option value="pink">Pink</option>
                    <option value="orange">Orange</option>
                    <option value="gray">Gray</option>
                  </select>
                  <button
                    type="button"
                    onclick="ui_manager.AddTag()"
                    class="bg-brand-500 hover:bg-brand-600 col-span-1 h-11 rounded-lg px-4 text-sm font-medium text-white transition-colors"
                    title="Add Tag"
                    data-i18n="common.add"
                  >
                    Add
                  </button>
                </div>
              </div>
              <!-- Description (Markdown Editor) -->
              <div class="sm:col-span-2">
                <label
                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                  data-i18n="task_modal.task_description"
                >
                  Description (Markdown)
                </label>
                <textarea id="task-description"></textarea>
              </div>
              <!-- Subtasks -->
              <div class="sm:col-span-2">
                <label
                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                  data-i18n="task_modal.task_subtasks"
                >
                  Subtasks
                </label>
                <div id="subtasks-container" class="mb-2 space-y-2"></div>
                <div class="flex gap-2">
                  <input
                    type="text"
                    id="subtask-input"
                    placeholder="Add a subtask..."
                    data-i18n-placeholder="task_modal.subtask_placeholder"
                    class="focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 flex-1 appearance-none rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm text-gray-800 shadow-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"
                  />
                  <button
                    type="button"
                    onclick="ui_manager.AddSubtask()"
                    class="bg-brand-500 hover:bg-brand-600 h-11 rounded-lg px-4 text-sm font-medium text-white transition-colors"
                    data-i18n="common.add"
                  >
                    Add
                  </button>
                </div>
              </div>
              <!-- Comments -->
              <div class="sm:col-span-2">
                <label
                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                  data-i18n="task_modal.task_comments"
                >
                  Comments
                </label>
                <div
                  id="comments-container"
                  class="mb-2 max-h-48 space-y-2 overflow-y-auto rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-700 dark:bg-gray-800"
                ></div>
                <div class="flex gap-2">
                  <input
                    type="text"
                    id="comment-input"
                    placeholder="Add a comment..."
                    data-i18n-placeholder="task_modal.comment_placeholder"
                    class="focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 flex-1 appearance-none rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm text-gray-800 shadow-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"
                  />
                  <button
                    type="button"
                    onclick="ui_manager.AddComment()"
                    class="bg-brand-500 hover:bg-brand-600 h-11 rounded-lg px-4 text-sm font-medium text-white transition-colors"
                    data-i18n="common.add"
                  >
                    Add
                  </button>
                </div>
              </div>
            </div>
            <!-- Attachments Section -->
            <div
              class="relative mt-6 rounded-xl border border-gray-200 bg-gray-50 p-3 sm:p-5 dark:border-gray-800 dark:bg-gray-900"
            >
              <div class="mb-5 flex items-center gap-3">
                <span
                  class="text-lg font-medium text-gray-800 dark:text-white/90"
                  data-i18n="task_modal.task_attachments"
                >
                  Attachments
                </span>
                <span
                  class="block h-4 w-px bg-gray-200 dark:bg-gray-800"
                ></span>
                <label
                  for="task-attachments"
                  class="text-brand-500 hover:text-brand-600 cursor-pointer text-sm font-medium"
                  data-i18n="task_modal.upload_files"
                >
                  Upload file
                </label>
                <input
                  type="file"
                  id="task-attachments"
                  accept="image/*,application/pdf,.doc,.docx,.xls,.xlsx,.txt"
                  multiple
                  onchange="HandleMultipleFilesUpload(event)"
                  class="sr-only"
                />
              </div>
              <div id="attachments-list">
                <div
                  class="flex h-20 items-center justify-center text-sm text-gray-500 dark:text-gray-400"
                  data-i18n="task_modal.no_attachments"
                >
                  No attachments yet
                </div>
              </div>
              <!-- Legacy Image Upload (Hidden but kept for backward compatibility) -->
              <div class="hidden">
                <input
                  type="file"
                  id="task-image"
                  accept="image/*"
                  onchange="HandleImageUpload(event)"
                  class="sr-only"
                />
              </div>
              <div id="image-preview" class="hidden">
                <div
                  class="group relative flex w-full cursor-pointer items-center gap-3 rounded-xl border border-gray-200 bg-white py-2.5 pl-3 pr-5 sm:w-auto dark:border-gray-800 dark:bg-white/5"
                >
                  <button
                    type="button"
                    onclick="RemoveImage()"
                    class="absolute -right-2 -top-2 flex h-5 w-5 items-center justify-center rounded-full border border-gray-200 bg-white text-gray-400 opacity-0 transition-opacity group-hover:opacity-100 dark:border-gray-800 dark:bg-gray-900"
                  >
                    <svg
                      class="fill-current"
                      width="12"
                      height="12"
                      viewBox="0 0 12 12"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M3.02145 8.2704C2.82618 8.46567 2.82618 8.78225 3.02145 8.97751C3.21671 9.17277 3.53329 9.17277 3.72855 8.97751L5.99935 6.70672L8.2704 8.97777C8.46567 9.17303 8.78225 9.17303 8.97751 8.97777C9.17277 8.78251 9.17277 8.46592 8.97751 8.27066L6.70646 5.99961L8.97751 3.72855C9.17277 3.53329 9.17277 3.21671 8.97751 3.02145C8.78225 2.82618 8.46567 2.82618 8.2704 3.02145L5.99935 5.2925L3.72855 3.02171C3.53329 2.82644 3.21671 2.82644 3.02145 3.02171C2.82618 3.21697 2.82618 3.53355 3.02145 3.72881L5.29224 5.99961L3.02145 8.2704Z"
                        fill=""
                      ></path>
                    </svg>
                  </button>
                  <div class="h-10 w-10">
                    <img
                      id="preview-img"
                      src=""
                      alt="Preview"
                      class="h-full w-full rounded-lg object-cover"
                    />
                  </div>
                  <div>
                    <p
                      class="text-sm font-medium text-gray-800 dark:text-white/90"
                      id="image-name"
                    >
                      Image attached
                    </p>
                    <span class="flex items-center gap-1.5">
                      <span class="text-xs text-gray-500 dark:text-gray-400">
                        Image
                      </span>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Footer Actions -->
          <div class="mt-6 flex items-center justify-end gap-3 px-2">
            <button
              type="button"
              onclick="CloseTaskModal()"
              class="flex justify-center rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"
              data-i18n="common.cancel"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="bg-brand-500 hover:bg-brand-600 flex justify-center rounded-lg px-4 py-2.5 text-sm font-medium text-white"
            >
              <span id="submit-text">Create Task</span>
            </button>
          </div>
        </form>
      </div>
    </div>
    <!-- Share Modal -->
    <div
      id="share-modal"
      class="fixed inset-0 z-50 hidden items-center justify-center p-4"
    >
      <div
        class="modal-backdrop absolute inset-0 bg-black/50"
        onclick="CloseShareModal()"
      ></div>
      <div
        class="modal-content relative w-full max-w-[600px] rounded-3xl bg-white p-6 shadow-xl lg:p-8 dark:bg-gray-900"
      >
        <div class="px-2">
          <h4
            class="mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90"
            data-i18n="share.share_board_title"
          >
            Share Board
          </h4>
          <p
            class="mb-6 text-sm text-gray-500 dark:text-gray-400"
            data-i18n="share.share_description"
          >
            Share your Kanban Board with others in a read-only format.
          </p>
        </div>
        <!-- Close Button -->
        <button
          onclick="CloseShareModal()"
          class="absolute right-5 top-5 z-50 flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-gray-400 transition-colors hover:bg-gray-200 hover:text-gray-600 sm:h-11 sm:w-11 dark:bg-white/[0.05] dark:text-gray-400 dark:hover:bg-white/[0.07] dark:hover:text-gray-300"
        >
          <svg
            class="h-5 w-5 fill-current sm:h-6 sm:w-6"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6.04289 16.5418C5.65237 16.9323 5.65237 17.5655 6.04289 17.956C6.43342 18.3465 7.06658 18.3465 7.45711 17.956L11.9987 13.4144L16.5408 17.9565C16.9313 18.347 17.5645 18.347 17.955 17.9565C18.3455 17.566 18.3455 16.9328 17.955 16.5423L13.4129 12.0002L17.955 7.45808C18.3455 7.06756 18.3455 6.43439 17.955 6.04387C17.5645 5.65335 16.9313 5.65335 16.5408 6.04387L11.9987 10.586L7.45711 6.04439C7.06658 5.65386 6.43342 5.65386 6.04289 6.04439C5.65237 6.43491 5.65237 7.06808 6.04289 7.4586L10.5845 12.0002L6.04289 16.5418Z"
              fill=""
            ></path>
          </svg>
        </button>
        <div
          class="max-h-[450px] overflow-y-auto px-2"
          style="scrollbar-width: thin"
        >
          <!-- Share URL Display -->
          <div class="mb-4">
            <label
              class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-400"
              data-i18n="share.share_link"
            >
              Share Link
            </label>
            <div class="grid grid-cols-3 gap-2">
              <input
                type="text"
                id="share-url"
                readonly
                class="col-span-2 h-11 flex-1 appearance-none rounded-lg border border-gray-300 bg-gray-50 px-4 py-2.5 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
              />
              <button
                onclick="CopyShareURL()"
                class="bg-brand-500 hover:bg-brand-600 col-span-1 inline-flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium text-white"
              >
                <svg
                  class="fill-current"
                  width="20"
                  height="20"
                  viewBox="0 0 640 640"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M288 64C252.7 64 224 92.7 224 128L224 384C224 419.3 252.7 448 288 448L480 448C515.3 448 544 419.3 544 384L544 183.4C544 166 536.9 149.3 524.3 137.2L466.6 81.8C454.7 70.4 438.8 64 422.3 64L288 64zM160 192C124.7 192 96 220.7 96 256L96 512C96 547.3 124.7 576 160 576L352 576C387.3 576 416 547.3 416 512L416 496L352 496L352 512L160 512L160 256L176 256L176 192L160 192z"
                  />
                </svg>
                <span data-i18n="share.copy_button">Copy</span>
              </button>
            </div>
          </div>
          <!-- Info Message -->
          <div
            class="rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-800 dark:bg-blue-900/20"
          >
            <div class="flex gap-3">
              <svg
                class="mt-0.5 h-5 w-5 flex-shrink-0 fill-blue-500"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18ZM10 7C10.5523 7 11 7.44772 11 8V12C11 12.5523 10.5523 13 10 13C9.44772 13 9 12.5523 9 12V8C9 7.44772 9.44772 7 10 7ZM10 15C10.5523 15 11 14.5523 11 14C11 13.4477 10.5523 13 10 13C9.44772 13 9 13.4477 9 14C9 14.5523 9.44772 15 10 15Z"
                  fill=""
                ></path>
              </svg>
              <div class="text-sm text-blue-700 dark:text-blue-300">
                <p class="mb-1 font-medium" data-i18n="common.info">
                  Important Notes:
                </p>
                <ul class="list-inside list-disc space-y-1 text-xs">
                  <li data-i18n="share.note_readonly">
                    This link will display the board in read-only mode.
                  </li>
                  <li data-i18n="share.note_no_server">
                    The data will not be stored on the server.
                  </li>
                  <li data-i18n="share.note_no_edit">
                    The person receiving the link will not be able to edit or
                    delete tasks.
                  </li>
                  <li>
                    <strong
                      class="text-orange-600 dark:text-orange-400"
                      data-i18n="share.note_no_attachments"
                      >Images and attachments will NOT be shared</strong
                    >
                    <span data-i18n="share.note_no_attachments_detail"
                      >to keep URL size manageable.</span
                    >
                  </li>
                  <li data-i18n="share.note_only_basic">
                    Only task titles, descriptions, tags, dates, and status will
                    be shared.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <!-- Footer Actions -->
        <div class="mt-6 flex items-center justify-end gap-3 px-2">
          <button
            onclick="CloseShareModal()"
            class="flex justify-center rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"
            data-i18n="common.close"
          >
            Close
          </button>
        </div>
      </div>
    </div>
    <!-- Import/Export Modal -->
    <div
      id="import-export-modal"
      class="fixed inset-0 z-50 hidden items-center justify-center p-4"
    >
      <div
        class="modal-backdrop absolute inset-0 bg-black/50"
        onclick="CloseImportExportModal()"
      ></div>
      <div
        class="modal-content relative w-full max-w-[600px] rounded-3xl bg-white p-6 shadow-xl lg:p-8 dark:bg-gray-900"
      >
        <div class="px-2">
          <h4
            class="mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90"
            data-i18n="import_export.import_export_title"
          >
            Import/Export Data
          </h4>
          <p
            class="mb-6 text-sm text-gray-500 dark:text-gray-400"
            data-i18n="import_export.export_description"
          >
            Export your tasks to a JSON file or import tasks from a previously
            exported file.
          </p>
        </div>
        <!-- Close Button -->
        <button
          onclick="CloseImportExportModal()"
          class="absolute right-5 top-5 z-50 flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-gray-400 transition-colors hover:bg-gray-200 hover:text-gray-600 sm:h-11 sm:w-11 dark:bg-white/[0.05] dark:text-gray-400 dark:hover:bg-white/[0.07] dark:hover:text-gray-300"
        >
          <svg
            class="h-5 w-5 fill-current sm:h-6 sm:w-6"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6.04289 16.5418C5.65237 16.9323 5.65237 17.5655 6.04289 17.956C6.43342 18.3465 7.06658 18.3465 7.45711 17.956L11.9987 13.4144L16.5408 17.9565C16.9313 18.347 17.5645 18.347 17.955 17.9565C18.3455 17.566 18.3455 16.9328 17.955 16.5423L13.4129 12.0002L17.955 7.45808C18.3455 7.06756 18.3455 6.43439 17.955 6.04387C17.5645 5.65335 16.9313 5.65335 16.5408 6.04387L11.9987 10.586L7.45711 6.04439C7.06658 5.65386 6.43342 5.65386 6.04289 6.04439C5.65237 6.43491 5.65237 7.06808 6.04289 7.4586L10.5845 12.0002L6.04289 16.5418Z"
              fill=""
            ></path>
          </svg>
        </button>
        <div
          class="max-h-[450px] overflow-y-auto px-2"
          style="scrollbar-width: thin"
        >
          <!-- Export Section -->
          <div class="mb-6">
            <h5
              class="mb-3 text-lg font-medium text-gray-800 dark:text-white/90"
              data-i18n="import_export.export_data"
            >
              Export Tasks
            </h5>
            <p
              class="mb-3 text-sm text-gray-600 dark:text-gray-400"
              data-i18n="import_export.export_description"
            >
              Download all your tasks as a JSON file. This file can be imported
              later or transferred to another device.
            </p>
            <button
              onclick="ExportTasks()"
              class="bg-brand-500 hover:bg-brand-600 inline-flex w-full items-center justify-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium text-white"
            >
              <span data-i18n="import_export.export_button"
                >Export to JSON File</span
              >
            </button>
          </div>
          <!-- Divider -->
          <div class="my-6 border-t border-gray-200 dark:border-gray-700"></div>
          <!-- Import Section -->
          <div>
            <h5
              class="mb-3 text-lg font-medium text-gray-800 dark:text-white/90"
              data-i18n="import_export.import_data"
            >
              Import Tasks
            </h5>
            <p
              class="mb-3 text-sm text-gray-600 dark:text-gray-400"
              data-i18n="import_export.import_description"
            >
              Upload a JSON file to import tasks. You can choose to merge with
              existing tasks or replace all tasks.
            </p>
            <!-- File Input -->
            <div class="mb-3">
              <label
                for="import-file-input"
                class="hover:border-brand-400 hover:bg-brand-50 dark:hover:border-brand-600 dark:hover:bg-brand-900/20 flex w-full cursor-pointer items-center justify-center gap-2 rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 px-4 py-2.5 text-sm font-medium text-gray-700 transition-colors dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400"
              >
                <span
                  id="import-file-label"
                  data-i18n="task_modal.choose_json_file"
                  >Choose JSON File</span
                >
              </label>
              <input
                type="file"
                id="import-file-input"
                accept=".json,application/json"
                onchange="HandleImportFileSelect(event)"
                class="sr-only"
              />
            </div>
            <!-- Import Options -->
            <div class="mb-3">
              <label
                class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-400"
                data-i18n="import_export.import_mode"
              >
                Import Mode
              </label>
              <div class="space-y-2">
                <label class="flex cursor-pointer items-center gap-2">
                  <input
                    type="radio"
                    name="import-mode"
                    value="merge"
                    checked
                    class="text-brand-500 focus:ring-brand-500 h-4 w-4 border-gray-300 focus:ring-2"
                  />
                  <span
                    class="text-sm text-gray-700 dark:text-gray-400"
                    data-i18n="import_export.merge_mode"
                  >
                    Merge with existing tasks
                  </span>
                </label>
                <label class="flex cursor-pointer items-center gap-2">
                  <input
                    type="radio"
                    name="import-mode"
                    value="replace"
                    class="text-brand-500 focus:ring-brand-500 h-4 w-4 border-gray-300 focus:ring-2"
                  />
                  <span
                    class="text-sm text-gray-700 dark:text-gray-400"
                    data-i18n="import_export.replace_mode"
                  >
                    Replace all existing tasks
                  </span>
                </label>
              </div>
            </div>
            <!-- Import Button -->
            <button
              onclick="ImportTasks()"
              id="import-button"
              disabled
              class="inline-flex w-full cursor-not-allowed items-center justify-center gap-2 rounded-lg bg-gray-300 px-4 py-2.5 text-sm font-medium text-gray-500 dark:bg-gray-700 dark:text-gray-500"
            >
              <span data-i18n="import_export.import_button"
                >Import from JSON File</span
              >
            </button>
          </div>
          <!-- Info Message -->
          <div
            class="mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-800 dark:bg-blue-900/20"
          >
            <div class="flex gap-3">
              <svg
                class="mt-0.5 h-5 w-5 flex-shrink-0 fill-blue-500"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18ZM10 7C10.5523 7 11 7.44772 11 8V12C11 12.5523 10.5523 13 10 13C9.44772 13 9 12.5523 9 12V8C9 7.44772 9.44772 7 10 7ZM10 15C10.5523 15 11 14.5523 11 14C11 13.4477 10.5523 13 10 13C9.44772 13 9 13.4477 9 14C9 14.5523 9.44772 15 10 15Z"
                  fill=""
                ></path>
              </svg>
              <div class="text-sm text-blue-700 dark:text-blue-300">
                <p class="mb-1 font-medium" data-i18n="common.info">
                  Important Notes:
                </p>
                <ul class="list-inside list-disc space-y-1 text-xs">
                  <li data-i18n="import_export.note_all_data">
                    Exported files contain all task data including titles,
                    descriptions, tags, dates, attachments, and images.
                  </li>
                  <li data-i18n="import_export.note_base64">
                    All attachments and images are included in the export as
                    Base64 encoded data.
                  </li>
                  <li data-i18n="import_export.note_valid_file">
                    When importing, make sure the JSON file was exported from
                    this Kanban Board application.
                  </li>
                  <li data-i18n="import_export.note_replace_warning">
                    "Replace" mode will permanently delete all existing tasks
                    before importing.
                  </li>
                  <li data-i18n="import_export.note_large_files">
                    Large files may result in bigger export file sizes.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <!-- Footer Actions -->
        <div class="mt-6 flex items-center justify-end gap-3 px-2">
          <button
            onclick="CloseImportExportModal()"
            class="flex justify-center rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"
            data-i18n="common.close"
          >
            Close
          </button>
        </div>
      </div>
    </div>
    <!-- Image Viewer Modal -->
    <div
      id="image-viewer-modal"
      class="fixed inset-0 z-[60] hidden items-center justify-center bg-black/90 p-4"
    >
      <div
        class="modal-backdrop absolute inset-0 bg-black/50"
        onclick="CloseImageViewer()"
      ></div>
      <!-- Close Button -->
      <button
        onclick="CloseImageViewer()"
        class="absolute right-4 top-4 z-50 flex h-10 w-10 items-center justify-center rounded-full bg-white/10 text-white backdrop-blur-sm transition-colors hover:bg-white/20"
      >
        <svg
          class="h-6 w-6 fill-current"
          width="24"
          height="24"
          viewBox="0 0 640 640"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"
          />
        </svg>
      </button>
      <!-- Navigation Buttons -->
      <button
        onclick="NavigateImageViewer(-1)"
        class="absolute left-4 top-1/2 z-50 flex h-12 w-12 -translate-y-1/2 items-center justify-center rounded-full bg-white/10 text-white backdrop-blur-sm transition-colors hover:bg-white/20"
      >
        <svg
          class="h-6 w-6 fill-current"
          width="24"
          height="24"
          viewBox="0 0 640 640"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M199.7 299.8C189.4 312.4 190.2 330.9 201.9 342.6L329.9 470.6C339.1 479.8 352.8 482.5 364.8 477.5C376.8 472.5 384.6 460.9 384.6 447.9L384.6 191.9C384.6 179 376.8 167.3 364.8 162.3C352.8 157.3 339.1 160.1 329.9 169.2L201.9 297.2L199.7 299.6z"
          />
        </svg>
      </button>
      <button
        onclick="NavigateImageViewer(1)"
        class="absolute right-4 top-1/2 z-50 flex h-12 w-12 -translate-y-1/2 items-center justify-center rounded-full bg-white/10 text-white backdrop-blur-sm transition-colors hover:bg-white/20"
      >
        <svg
          class="h-6 w-6 fill-current"
          width="24"
          height="24"
          viewBox="0 0 640 640"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M441.3 299.8C451.5 312.4 450.8 330.9 439.1 342.6L311.1 470.6C301.9 479.8 288.2 482.5 276.2 477.5C264.2 472.5 256.5 460.9 256.5 448L256.5 192C256.5 179.1 264.3 167.4 276.3 162.4C288.3 157.4 302 160.2 311.2 169.3L439.2 297.3L441.4 299.7z"
          />
        </svg>
      </button>
      <div class="modal-content relative w-full max-w-[80vw]">
        <!-- Image Container -->
        <div class="flex flex-col items-center">
          <img
            id="viewer-image"
            src=""
            alt="Full size image"
            class="max-h-[80vh] w-auto rounded-lg shadow-2xl"
          />
          <!-- Image Info -->
          <div class="mt-4 text-center">
            <p
              id="viewer-caption"
              class="mb-1 text-lg font-medium text-white"
            ></p>
            <p id="viewer-counter" class="text-sm text-white/70"></p>
          </div>
        </div>
      </div>
    </div>
    <!-- External Libraries -->
    <script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.5.0/lz-string.min.js"></script>
    <!-- i18n Translations -->
    <script src="js/i18n/en.js"></script>
    <script src="js/i18n/th.js"></script>
    <!-- Application Scripts -->
    <script src="js/classes/Database.js"></script>
    <script src="js/classes/TaskManager.js"></script>
    <script src="js/classes/BoardManager.js"></script>
    <script src="js/classes/TemplateManager.js"></script>
    <script src="js/classes/RecurringTaskManager.js"></script>
    <script src="js/classes/AnalyticsManager.js"></script>
    <script src="js/classes/ThemeManager.js"></script>
    <script src="js/classes/I18nManager.js"></script>
    <script src="js/classes/UIManager.js"></script>
    <script src="js/classes/DragDropManager.js"></script>
    <script src="js/app.js"></script>
    <!-- PWA Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker
            .register('/service-worker.js')
            .then(registration => {
              console.log('Service Worker registered:', registration.scope);
            })
            .catch(error => {
              console.log('Service Worker registration failed:', error);
            });
        });
      }
    </script>
  </body>
</html>
